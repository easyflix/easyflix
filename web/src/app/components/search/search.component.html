<header>
  <h2>Search</h2>
</header>

<mat-divider></mat-divider>

<div class="search-container">
  <mat-form-field [floatLabel]="'never'">
    <mat-label>File path, name, extension</mat-label>
    <input matInput
           name="webflix-search"
           [(ngModel)]="search"
           spellcheck="false"/>
    <mat-icon class="close" matSuffix (click)="search = ''" *ngIf="search != ''">close</mat-icon>
  </mat-form-field>
  <span class="results">{{ (files$ | async)?.length || 0 }} results</span>
</div>

<mat-divider></mat-divider>

<cdk-virtual-scroll-viewport itemSize="60" [minBufferPx]="800" [maxBufferPx]="1000">
  <mat-action-list dense>
    <ng-template cdkVirtualFor let-file [cdkVirtualForOf]='files$ | async'>
      <mat-list-item tabindex='0' (click)="playVideo(file)">
        <mat-icon matListIcon class='material-icons-outlined'>
          movie
        </mat-icon>
        <h3 matLine [innerHTML]="file.name | sgSearchTerms:searchTerms"></h3>
        <span matLine class="subtext" [innerHTML]="file.path | sgSearchTerms:searchTerms"></span>
        <mat-divider></mat-divider>
      </mat-list-item>
    </ng-template>
  </mat-action-list>
</cdk-virtual-scroll-viewport>
